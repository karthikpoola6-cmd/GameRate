# Session 5 - January 24, 2026

## Summary
Added profile picture uploads, delete account feature, UI improvements, and deployed to Vercel for beta testing.

---

## What We Built

### 1. Profile Picture Upload
- Added avatar upload to settings page
- Created `Avatars` storage bucket in Supabase
- Pencil icon button to change photo
- Remove photo option
- Avatar displays in navigation bar across all pages

**Storage Bucket Policies Created:**
- `Public Read` - SELECT, allows anyone to view avatars
- `Auth Upload` - INSERT, allows authenticated users to upload

### 2. Delete Account Feature
- Added "Danger Zone" section in settings
- Confirmation modal requiring "delete my account" to confirm
- API route: `src/app/api/account/delete/route.ts`
- Uses service role key to delete user from Supabase auth
- Cascade delete removes all user data (profiles, game_logs, lists, follows)

### 3. UI Improvements
- Plus buttons in empty Top 5 favorite slots (owner only)
- Reordered profile page: Lists now appear above Recent Games
- Changed "Your Games" to "Want to Play" in user menu

### 4. Want to Play Page
- New page: `src/app/user/[username]/want-to-play/page.tsx`
- Shows games with status "want_to_play"
- Accessible from user menu dropdown

### 5. Activity Feed Updates
- Only shows friends' star ratings (not other activity types)
- Only shows most recent rating per friend (no duplicates)

### 6. Deployed to Vercel
- Pushed code to GitHub: `github.com/karthikpoola6-cmd/SavePoint`
- Connected to Vercel
- Added environment variables
- App is now live for beta testing

---

## Files Created
- `src/app/api/account/delete/route.ts` - Delete account API
- `src/app/user/[username]/want-to-play/page.tsx` - Want to play page

## Files Modified
- `src/app/settings/profile/page.tsx` - Avatar upload, delete account UI
- `src/components/FavoriteGames.tsx` - Plus buttons for empty slots
- `src/components/Navigation.tsx` - Fetch and pass avatar URL
- `src/components/UserMenu.tsx` - Display avatar, renamed menu item
- `src/components/ActivityFeed.tsx` - Filter to ratings only, one per friend
- `src/app/user/[username]/page.tsx` - Reordered sections, show favorites for owner
- `next.config.ts` - Added Supabase storage domain for images
- `.env.local` - Added SUPABASE_SERVICE_ROLE_KEY
- `.env.local.example` - Added service role key placeholder

---

## Environment Variables Added
```
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

## Supabase Setup Required
1. Create `Avatars` storage bucket (public)
2. Add policies:
   - Public Read (SELECT, true)
   - Auth Upload (INSERT, authenticated)

---

## Deployment
- **GitHub**: github.com/karthikpoola6-cmd/SavePoint
- **Vercel**: [Your Vercel URL]
- Environment variables configured in Vercel dashboard

---

## Next Session Ideas
- PWA setup for "Add to Home Screen" on mobile
- Stats page (total games, average rating, etc.)
- Currently Playing status on profile
- Notifications system
- UI polish

---

## Current Features Complete
- User auth & profiles with avatars
- Game search (IGDB API)
- Game logging (want to play, playing, played, dropped)
- 1-5 star ratings and reviews
- Top 5 favorites (drag-and-drop)
- Follow/unfollow users
- Activity feed (ratings only, one per friend)
- Lists with ranked mode
- Want to Play page
- Profile picture upload
- Delete account
- Deployed to Vercel
